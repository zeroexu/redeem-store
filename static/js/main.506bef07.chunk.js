(this["webpackJsonpredeem-store"]=this["webpackJsonpredeem-store"]||[]).push([[0],{17:function(e,t,n){"use strict";n.r(t),n.d(t,"setCurrentSort",(function(){return c})),n.d(t,"getNumberPages",(function(){return o}));var r=n(2),a=n(2).STORE_CASES,c=function(e,t){return e({type:a.SET_SORT,response:t})},o=function(e){var t=0;return e>0&&(t=Math.round(e/r.SETTINGS.MAX_ITEMS_BY_PAGE)),t}},2:function(e,t){e.exports={ENVIROMENT:{},SETTINGS:{MAX_ITEMS_BY_PAGE:10},METHODS:{GET:"GET",POST:"POST"},STORE_CASES:{RESET:"reset",SET_USER_DATA:"set_user_data",SET_PRODUCT_DATA:"set_product_data",SET_HISTORY_DATA:"set_history_data",SET_SORT:"set_current_sort"},SORTS:{ASC:"asc",DESC:"desc",RECENT:"recent"},API:{SERVER:"https://coding-challenge-api.aerolab.co/",GET:{USER:{URL:"user/me"},REDEEM_HISTORY:{URL:"user/history"},PRODUCTS:{URL:"products"}},POST:{ADD_POINTS:{URL:"user/points",PARAMS:{amount:0}},ADD_REDEEM:{URL:"redeem",PARAMS:{productId:void 0}}}}}},21:function(e,t,n){"use strict";n.r(t),n.d(t,"getUserInfo",(function(){return d})),n.d(t,"getProducts",(function(){return p})),n.d(t,"getHistory",(function(){return v}));var r=n(11),a=n.n(r),c=n(14),o=n(15),s=n.n(o),i=n(2),u=i.API,l=i.METHODS,E=i.STORE_CASES,m=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s.a.defaults.headers.common={Authorization:"Bearer ".concat(t)},n===l.GET?s.a.get(u.SERVER+e,r):s.a.post(u.SERVER+e,r)},d=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(u.GET.USER.URL,n,l.GET);case 2:return r=e.sent,e.abrupt("return",t({type:E.SET_USER_DATA,response:r}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(u.GET.PRODUCTS.URL,n,l.GET);case 2:return r=e.sent,e.abrupt("return",t({type:E.SET_PRODUCT_DATA,response:r}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(u.GET.REDEEM_HISTORY.URL,n,l.GET);case 2:return r=e.sent,e.abrupt("return",t({type:E.SET_USER_DATA,response:r}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},32:function(e,t,n){e.exports=n.p+"static/media/logo.71af6f4b.svg"},33:function(e,t,n){e.exports=n.p+"static/media/header-x1.f0b98264.png"},34:function(e,t,n){e.exports=n.p+"static/media/arrow-left.2e6efe58.svg"},35:function(e,t,n){e.exports=n.p+"static/media/arrow-right.bedef383.svg"},38:function(e,t,n){e.exports=n.p+"static/media/buy-white.40bc2813.svg"},39:function(e,t,n){e.exports=n.p+"static/media/buy-blue.2f11a957.svg"},40:function(e,t,n){e.exports=n(70)},45:function(e,t,n){},69:function(e,t,n){},7:function(e,t,n){e.exports=n.p+"static/media/coin.4669120c.svg"},70:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(31),o=n.n(c),s=(n(45),n(13)),i=n(9),u=n(8),l=n(2),E=l.STORE_CASES,m={user:void 0,products:[],redeemHistory:[],token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZGRkYjk4OWIwMWI5ZDAwNmM1MjllNDgiLCJpYXQiOjE1NzQ4MTIwNDF9.O3prCG46keu0x758k1o0jDJBTnGekOB_dH_1oufZQRQ",currentSorting:l.SORTS.RECENT},d=function(e,t){var n={};switch(t.type){case E.RESET:n=m;break;case E.SET_USER_DATA:t.response&&(n={user:t.response.data});break;case E.SET_PRODUCT_DATA:t.response&&(n={products:t.response.data});break;case E.SET_HISTORY_DATA:t.response&&(n={redeemHistory:t.response.data});break;case E.SET_SORT:t.response&&(n={currentSorting:t.response});break;default:n={}}var r=Object.assign({},e);return Object.assign(r,n)},p=a.a.createContext(),v=n(7),S=n.n(v),f=n(21).getUserInfo,g=function(e){e.user;var t=Object(r.useContext)(p),n=t.store,c=t.dispatch,o=Object(r.useState)(!1),s=Object(u.a)(o,2),i=s[0],l=s[1];if(!function(e){return void 0!==e&&void 0!==e.name}(n.user))return i||(l(!0),f(c,n.token)),a.a.createElement("div",{className:"user-preview"},a.a.createElement("div",{className:"user-name"},a.a.createElement("h3",null,"...Loading...")));var E=n.user,m=E.name,d=E.points;return a.a.createElement("div",{className:"user-preview"},a.a.createElement("div",{className:"user-name"},a.a.createElement("h3",null,m)),a.a.createElement("div",{className:"user-points"},a.a.createElement("h3",null,d),a.a.createElement("img",{src:S.a,alt:"coin"})))},T=n(32),h=n.n(T),b=function(){return a.a.createElement("div",{id:"header"},a.a.createElement("div",{className:"logo"},a.a.createElement("img",{src:h.a,alt:"logo"})),a.a.createElement(g,null))},R=n(33),O=n.n(R),_=function(){return a.a.createElement("div",{className:"banner"},a.a.createElement("img",{src:O.a,alt:"banner"}))},N=n(17),A=function(e){var t=e.currentPage,n=void 0===t?0:t,c=Object(r.useContext)(p).store,o=Object(N.getNumberPages)(c.products.length);return a.a.createElement("div",{id:"counter-list"},n," of ",o)},P=n(2),C=n(17).setCurrentSort,y=function(e,t){return e===t?"active":"inactive"},I=function(){var e=Object(r.useContext)(p),t=e.store,n=e.dispatch;return a.a.createElement("div",{id:"sorter"},"Sort by:",a.a.createElement("button",{className:y(t.currentSorting,P.SORTS.RECENT),onClick:function(){C(n,P.SORTS.RECENT)}},"Most recent"),a.a.createElement("button",{className:y(t.currentSorting,P.SORTS.ASC),onClick:function(){C(n,P.SORTS.ASC)}},"Lowest price"),a.a.createElement("button",{className:y(t.currentSorting,P.SORTS.DESC),onClick:function(){C(n,P.SORTS.DESC)}},"Highestprice"))},D=n(34),w=n.n(D),k=n(35),M=n.n(k),G=function(e){var t=e.src,n=e.route;return a.a.createElement(s.b,{to:n},a.a.createElement("button",null,a.a.createElement("img",{src:t,alt:"navigation button"})))},j=function(e){e.back,e.foward;return a.a.createElement("div",{className:"navigator-page"},a.a.createElement(G,{src:w.a,route:""}),a.a.createElement(G,{src:M.a,route:""}))},x=function(e){var t=e.isFooter,n=void 0!==t&&t,r=e.currentPage;return a.a.createElement("div",{id:"controls"},a.a.createElement(A,{currentPage:r}),a.a.createElement("div",null,!n&&a.a.createElement(I,null)),a.a.createElement(j,null))},U=function(e){var t=e.children,n=e.currentPage;return a.a.createElement("div",{className:"app"},a.a.createElement("div",null),a.a.createElement("div",{id:"main-container"},a.a.createElement(b,null),a.a.createElement(_,null),a.a.createElement("div",{id:"internal-list"},a.a.createElement(x,{currentPage:n}),t,a.a.createElement(x,{currentPage:n,isFooter:!0}))),a.a.createElement("div",null))},Y=function(e){var t=e.price;return a.a.createElement("div",{className:"remain-indicator"},"You need ",t," ",a.a.createElement("img",{src:S.a,alt:"coin"}))},H=n(38),L=n.n(H),B=function(e){var t=e.price;e.id;return e.show?a.a.createElement("div",{className:"inner-modal-menu"},a.a.createElement("div",{className:"buy-container"},a.a.createElement("button",{className:"buy-floater"},a.a.createElement("img",{src:L.a,alt:"buy button"}))),a.a.createElement("div",{className:"preview-price"},a.a.createElement("h2",null,t),a.a.createElement("img",{src:S.a,alt:"coin"})),a.a.createElement("div",{className:"redeem-button"},a.a.createElement("button",null,"Redeem Now"))):a.a.createElement("div",{style:{display:"none"}})},J=n(39),X=n.n(J),Q=n(2).SORTS,V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!(e-t<0)},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e-t},z=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length;n++)t[n]=e[n];return t.sort((function(e,t){return e.cost-t.cost}))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return z(e).reverse()},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=V(e,t);return n?a.a.createElement("div",{className:"buy-container "},a.a.createElement("button",{className:"buy-floater"},a.a.createElement("img",{src:X.a,alt:"buy button"}))):a.a.createElement("div",{className:"remaining-points"},a.a.createElement("button",null,a.a.createElement("img",{src:S.a,alt:"coin"}),a.a.createElement("h6",null,"You need ",-1*W(e,t))))},$=function(e){var t=e.srcProduct,n=e.category,r=void 0===n?"":n,c=e.name,o=void 0===c?"":c,s=e.userPoints,i=void 0===s?0:s,u=e.price,l=void 0===u?0:u,E=V(i,l)?"":"shaker";return a.a.createElement("div",{className:"product-card "},a.a.createElement("div",{className:"img-container"},a.a.createElement("img",{src:t,alt:"this is a ".concat(o),className:E})),Z(i,l),a.a.createElement("div",{className:"data-container"},a.a.createElement("h3",null,r),a.a.createElement("h3",null,o)))},q=function(e){var t=e.product,n=e.userPoints,c=Object(r.useState)(!1),o=Object(u.a)(c,2),s=o[0],i=o[1],l=t.cost,E=t.id,m=t.points,d=t.name,p=t.img,v=t.category,S=V(0,m),f=-1*W(0,m);return a.a.createElement("div",{className:"product-cell",onMouseOver:function(){i(!0)},onMouseOut:function(){i(!1)}},S&&a.a.createElement("div",{className:"shoppable-bag"}),!S&&a.a.createElement(Y,{price:f}),a.a.createElement($,{price:l,srcProduct:p.url,name:d,category:v,userPoints:n}),a.a.createElement(B,{price:l,id:E,show:s&&V(n,l),userPoints:n}))},K=n(21).getProducts,ee=function(e){var t=e.currentPage,n=Object(r.useContext)(p),c=n.store,o=n.dispatch,s=Object(r.useState)(!1),i=Object(u.a)(s,2),l=i[0],E=i[1],m=c.products?c.products:[],d=c.user&&c.user.points?c.user.points:0,v=function(e,t){for(var n=0===e?0:(e-1)*P.SETTINGS.MAX_ITEMS_BY_PAGE,r=n+P.SETTINGS.MAX_ITEMS_BY_PAGE>t.length?t.length:n+P.SETTINGS.MAX_ITEMS_BY_PAGE,a=[],c=n;c<r;c++)t[c]&&a.push(t[c]);return a}(t,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t){case Q.RECENT:return e;case Q.DESC:return F(e);case Q.ASC:return z(e);default:return e}}(m,c.currentSorting));return c.token&&0===c.products.length&&!1===l&&(E(!0),K(o,c.token)),c.token&&c.products.length>0&&!0===l&&E(!1),a.a.createElement("div",{id:"products-container"},v.map((function(e,t){return a.a.createElement(q,{product:e,key:t,userPoints:d})})))},te=function(e){var t=e.match,n=Object(r.useReducer)(d,m),c=Object(u.a)(n,2),o=c[0],s=c[1],i=t.params,l=i.currentPage?i.currentPage:0;return a.a.createElement(p.Provider,{value:{store:o,dispatch:s}},a.a.createElement(U,{currentPage:l},a.a.createElement(ee,{currentPage:l})))};n(69);var ne=function(){return a.a.createElement(s.a,null,a.a.createElement(i.c,null,a.a.createElement(i.a,{path:"/page/:currentPage",component:te}),a.a.createElement(i.a,{path:"/",component:te})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.506bef07.chunk.js.map