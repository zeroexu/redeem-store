(this["webpackJsonpredeem-store"]=this["webpackJsonpredeem-store"]||[]).push([[0],{10:function(e,t,n){"use strict";n.r(t),n.d(t,"setCurrentSort",(function(){return c})),n.d(t,"getNumberPages",(function(){return o})),n.d(t,"getPrevPage",(function(){return u})),n.d(t,"getNextpage",(function(){return s})),n.d(t,"showNextButton",(function(){return l})),n.d(t,"showPrevButton",(function(){return i}));var r=n(2),a=n(2).STORE_CASES,c=function(e,t){return e({type:a.SET_SORT,response:t})},o=function(e){var t=0;return e>0&&(t=Math.round(e/r.SETTINGS.MAX_ITEMS_BY_PAGE)),t},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e-1;return t<0?0:t},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e+1,r=o(t);return n>r?r:n},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e-1;return!(t<=0)},l=function(e,t){return!(e+1>o(t))}},14:function(e,t,n){"use strict";n.r(t),n.d(t,"getUserInfo",(function(){return d})),n.d(t,"getProducts",(function(){return p})),n.d(t,"getHistory",(function(){return v})),n.d(t,"buyProduct",(function(){return f})),n.d(t,"addPoints",(function(){return S}));var r=n(7),a=n.n(r),c=n(15),o=n(17),u=n.n(o),s=n(2),i=s.API,l=s.METHODS,E=s.STORE_CASES,m=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return console.log(n),u.a.defaults.headers.common={Authorization:"Bearer ".concat(t)},n===l.GET?u.a.get(i.SERVER+e,r):u.a.post(i.SERVER+e,r)},d=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(i.GET.USER.URL,n,l.GET);case 2:return r=e.sent,e.abrupt("return",t({type:E.SET_USER_DATA,response:r}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(i.GET.PRODUCTS.URL,n,l.GET);case 2:return r=e.sent,e.abrupt("return",t({type:E.SET_PRODUCT_DATA,response:r}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(i.GET.REDEEM_HISTORY.URL,n,l.GET);case 2:return r=e.sent,e.abrupt("return",t({type:E.SET_USER_DATA,response:r}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(i.POST.ADD_REDEEM.URL,n,l.POST,{productId:r});case 2:return e.next=4,m(i.GET.USER.URL,n,l.GET);case 4:return c=e.sent,e.abrupt("return",t({type:E.SET_USER_DATA,response:c}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),S=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(i.POST.ADD_POINTS.URL,n,l.POST,{amount:1e3});case 2:return e.next=4,m(i.GET.USER.URL,n,l.GET);case 4:return r=e.sent,e.abrupt("return",t({type:E.SET_USER_DATA,response:r}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},2:function(e,t){e.exports={ENVIROMENT:{},SETTINGS:{MAX_ITEMS_BY_PAGE:10},METHODS:{GET:"GET",POST:"POST"},STORE_CASES:{RESET:"reset",SET_USER_DATA:"set_user_data",SET_PRODUCT_DATA:"set_product_data",SET_HISTORY_DATA:"set_history_data",SET_SORT:"set_current_sort"},SORTS:{ASC:"asc",DESC:"desc",RECENT:"recent"},API:{SERVER:"https://coding-challenge-api.aerolab.co/",GET:{USER:{URL:"user/me"},REDEEM_HISTORY:{URL:"user/history"},PRODUCTS:{URL:"products"}},POST:{ADD_POINTS:{URL:"user/points",PARAMS:{amount:0}},ADD_REDEEM:{URL:"redeem",PARAMS:{productId:void 0}}}}}},36:function(e,t,n){e.exports=n.p+"static/media/logo.71af6f4b.svg"},37:function(e,t,n){e.exports=n.p+"static/media/header-x1.f0b98264.png"},38:function(e,t,n){e.exports=n.p+"static/media/arrow-left.2e6efe58.svg"},39:function(e,t,n){e.exports=n.p+"static/media/arrow-right.bedef383.svg"},42:function(e,t,n){e.exports=n.p+"static/media/buy-white.40bc2813.svg"},43:function(e,t,n){e.exports=n.p+"static/media/buy-blue.2f11a957.svg"},44:function(e,t,n){e.exports=n(82)},49:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(20),o=n.n(c),u=(n(49),n(16)),s=n(11),i=n(5),l=n(2),E=l.STORE_CASES,m={user:void 0,products:[],redeemHistory:[],token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZGRkYjk4OWIwMWI5ZDAwNmM1MjllNDgiLCJpYXQiOjE1NzQ4MTIwNDF9.O3prCG46keu0x758k1o0jDJBTnGekOB_dH_1oufZQRQ",currentSorting:l.SORTS.RECENT},d=function(e,t){var n={};switch(t.type){case E.RESET:n=m;break;case E.SET_USER_DATA:t.response&&(n={user:t.response.data});break;case E.SET_PRODUCT_DATA:t.response&&(n={products:t.response.data});break;case E.SET_HISTORY_DATA:t.response&&(n={redeemHistory:t.response.data});break;case E.SET_SORT:t.response&&(n={currentSorting:t.response});break;default:n={}}var r=Object.assign({},e);return Object.assign(r,n)},p=a.a.createContext(),v=n(14),f=n(9),S=n.n(f),g=n(14).getUserInfo,T=function(e){e.user;var t=Object(r.useContext)(p),n=t.store,c=t.dispatch,o=Object(r.useState)(!1),u=Object(i.a)(o,2),s=u[0],l=u[1];if(!function(e){return void 0!==e&&void 0!==e.name}(n.user))return s||(l(!0),g(c,n.token)),a.a.createElement("div",{className:"user-preview"},a.a.createElement("div",{className:"user-name"},a.a.createElement("h3",null,"...Loading...")));var E=n.user,m=E.name,d=E.points;return a.a.createElement("div",{className:"user-preview"},a.a.createElement("div",{className:"user-name"},a.a.createElement("button",{className:"increase-button",onClick:function(){Object(v.addPoints)(c,n.token)}},"+"),a.a.createElement("h3",null,m)),a.a.createElement("div",{className:"user-points"},a.a.createElement("h3",null,d),a.a.createElement("img",{src:S.a,alt:"coin"})))},b=n(36),h=n.n(b),O=function(){return a.a.createElement("div",{id:"header"},a.a.createElement("div",{className:"logo"},a.a.createElement("img",{src:h.a,alt:"logo"})),a.a.createElement(T,null))},R=n(37),_=n.n(R),N=function(){return a.a.createElement("div",{className:"banner"},a.a.createElement("img",{src:_.a,alt:"banner"}))},P=n(10),A=function(e){var t=e.currentPage,n=void 0===t?0:t,c=Object(r.useContext)(p).store,o=Object(P.getNumberPages)(c.products.length);return a.a.createElement("div",{id:"counter-list"},n," of ",o)},C=n(2),y=n(10).setCurrentSort,k=function(e,t){return e===t?"active":"inactive"},w=function(){var e=Object(r.useContext)(p),t=e.store,n=e.dispatch;return a.a.createElement("div",{id:"sorter"},"Sort by:",a.a.createElement("button",{className:k(t.currentSorting,C.SORTS.RECENT),onClick:function(){y(n,C.SORTS.RECENT)}},"Most recent"),a.a.createElement("button",{className:k(t.currentSorting,C.SORTS.ASC),onClick:function(){y(n,C.SORTS.ASC)}},"Lowest price"),a.a.createElement("button",{className:k(t.currentSorting,C.SORTS.DESC),onClick:function(){y(n,C.SORTS.DESC)}},"Highestprice"))},D=n(38),j=n.n(D),x=n(39),I=n.n(x),U=function(e){var t=e.src,n=e.route,r=e.show;return void 0!==r&&r?a.a.createElement(u.b,{to:n},a.a.createElement("button",null,a.a.createElement("img",{src:t,alt:"navigation button"}))):a.a.createElement("div",null)},M=function(e){var t=e.currentPage,n=Object(r.useContext)(p),c=n.store,o=(n.dispatch,Object(P.getNextpage)(t,c.products.length));console.log("nextPage",o,t);var u=Object(P.getPrevPage)(t,c.products.length),s=Object(P.showNextButton)(t,c.products.length),i=Object(P.showPrevButton)(t,c.products.length);return a.a.createElement("div",{className:"navigator-page"},a.a.createElement(U,{src:j.a,route:"/page/"+u,show:i}),a.a.createElement(U,{src:I.a,route:"/page/"+o,show:s}))},G=function(e){var t=e.isFooter,n=void 0!==t&&t,r=e.currentPage;return a.a.createElement("div",{id:"controls"},a.a.createElement(A,{currentPage:r}),a.a.createElement("div",null,!n&&a.a.createElement(w,null)),a.a.createElement(M,{currentPage:r}))},L=function(e){var t=e.children,n=e.currentPage;return a.a.createElement("div",{className:"app"},a.a.createElement("div",null),a.a.createElement("div",{id:"main-container"},a.a.createElement(O,null),a.a.createElement(N,null),a.a.createElement("div",{id:"internal-list"},a.a.createElement(G,{currentPage:n}),t,a.a.createElement(G,{currentPage:n,isFooter:!0}))),a.a.createElement("div",null))},Y=function(e){var t=e.price;return a.a.createElement("div",{className:"remain-indicator"},"You need ",t," ",a.a.createElement("img",{src:S.a,alt:"coin"}))},B=n(23),H=n.n(B);H.a.setAppElement("#modal-zone");var J={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},X=function(){},Q=function(e){},V=function(e){var t=e.question,n=void 0===t?"":t,c=e.callbackYes,o=void 0===c?function(){}:c,u=e.callbackNo,s=void 0===u?function(){}:u,l=e.isOpenedModal,E=void 0!==l&&l,m=Object(r.useState)(!1),d=Object(i.a)(m,2),p=d[0],v=d[1];return p!==E&&v(E),a.a.createElement(H.a,{isOpen:p,onAfterOpen:X,onRequestClose:Q,style:J,contentLabel:"Confirm Option"},a.a.createElement("div",{className:"confirm-dialog"},a.a.createElement("h1",null,n),a.a.createElement("button",{onClick:function(){o()},className:"yes-button"},"Yes"),a.a.createElement("button",{onClick:function(){s()},className:"no-button"},"No")))},W=n(42),z=n.n(W),q=function(e){var t=e.price,n=e.id,c=e.show,o=Object(r.useContext)(p),u=o.store,s=o.dispatch,l=Object(r.useState)(!1),E=Object(i.a)(l,2),m=E[0],d=E[1];if(!c)return a.a.createElement("div",{style:{display:"none"}});return a.a.createElement("div",{className:"inner-modal-menu"},a.a.createElement("div",{className:"buy-container"},a.a.createElement("button",{className:"buy-floater"},a.a.createElement("img",{src:z.a,alt:"buy button"}))),a.a.createElement("div",{className:"preview-price"},a.a.createElement("h2",null,t),a.a.createElement("img",{src:S.a,alt:"coin"})),a.a.createElement("div",{className:"redeem-button"},a.a.createElement("button",{onClick:function(){d(!0)}},"Redeem Now")),a.a.createElement(V,{question:"Are you sure?",callbackYes:function(){d(!1),Object(v.buyProduct)(s,u.token,n)},callbackNo:function(){d(!1)},isOpenedModal:m}))},F=n(43),Z=n.n(F),$=n(2).SORTS,K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!(e-t<0)},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e-t},te=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length;n++)t[n]=e[n];return t.sort((function(e,t){return e.cost-t.cost}))},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return te(e).reverse()},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=K(e,t);return n?a.a.createElement("div",{className:"buy-container "},a.a.createElement("button",{className:"buy-floater"},a.a.createElement("img",{src:Z.a,alt:"buy button"}))):a.a.createElement("div",{className:"remaining-points"},a.a.createElement("button",null,a.a.createElement("img",{src:S.a,alt:"coin"}),a.a.createElement("h6",null,"You need ",-1*ee(e,t))))},ae=function(e){var t=e.srcProduct,n=e.category,r=void 0===n?"":n,c=e.name,o=void 0===c?"":c,u=e.userPoints,s=void 0===u?0:u,i=e.price,l=void 0===i?0:i,E=K(s,l)?"":"shaker";return a.a.createElement("div",{className:"product-card "},a.a.createElement("div",{className:"img-container"},a.a.createElement("img",{src:t,alt:"this is a ".concat(o),className:E})),re(s,l),a.a.createElement("div",{className:"data-container"},a.a.createElement("h3",null,r),a.a.createElement("h3",null,o)))},ce=function(e){var t=e.product,n=e.userPoints,c=Object(r.useState)(!1),o=Object(i.a)(c,2),u=o[0],s=o[1],l=t.cost,E=t._id,m=t.points,d=t.name,p=t.img,v=t.category,f=K(0,m),S=-1*ee(0,m);return a.a.createElement("div",{className:"product-cell",onMouseOver:function(){s(!0)}},f&&a.a.createElement("div",{className:"shoppable-bag"}),!f&&a.a.createElement(Y,{price:S}),a.a.createElement(ae,{price:l,srcProduct:p.url,name:d,category:v,userPoints:n}),a.a.createElement(q,{price:l,id:E,show:u&&K(n,l),userPoints:n,onMouseOut:function(){s(!1)}}))},oe=n(14).getProducts,ue=function(e){var t=e.currentPage,n=Object(r.useContext)(p),c=n.store,o=n.dispatch,u=Object(r.useState)(!1),s=Object(i.a)(u,2),l=s[0],E=s[1],m=c.products?c.products:[],d=c.user&&c.user.points?c.user.points:0,v=function(e,t){for(var n=0===e?0:(e-1)*C.SETTINGS.MAX_ITEMS_BY_PAGE,r=n+C.SETTINGS.MAX_ITEMS_BY_PAGE>t.length?t.length:n+C.SETTINGS.MAX_ITEMS_BY_PAGE,a=[],c=n;c<r;c++)t[c]&&a.push(t[c]);return a}(t,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t){case $.RECENT:return e;case $.DESC:return ne(e);case $.ASC:return te(e);default:return e}}(m,c.currentSorting));return c.token&&0===c.products.length&&!1===l&&(E(!0),oe(o,c.token)),c.token&&c.products.length>0&&!0===l&&E(!1),a.a.createElement("div",{id:"products-container"},v.map((function(e,t){return a.a.createElement(ce,{product:e,key:t,userPoints:d})})))},se=function(e){var t=e.match,n=Object(r.useReducer)(d,m),c=Object(i.a)(n,2),o=c[0],u=c[1],s=t.params,l=s.currentPage?parseInt(s.currentPage):0;return a.a.createElement(p.Provider,{value:{store:o,dispatch:u}},a.a.createElement(L,{currentPage:l},a.a.createElement(ue,{currentPage:l})))};n(81);var ie=function(){return a.a.createElement(u.a,null,a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/page/:currentPage",component:se}),a.a.createElement(s.a,{path:"/",component:se})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,n){e.exports=n.p+"static/media/coin.4669120c.svg"}},[[44,1,2]]]);
//# sourceMappingURL=main.7b190fcc.chunk.js.map